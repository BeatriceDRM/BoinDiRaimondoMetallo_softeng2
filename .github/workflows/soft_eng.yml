name: soft_eng

on:
	push:
		branches: 
			- main

jobs:
	build:
		runs-on: ubuntu-latest

	steps: 
	- name: Checkout
	- uses: actions/checkout@v2
	with:
		submodules: true

	- name: MPI installation
	  run: sudo apt-get install -y libopenmpi-dev

	- name: CMAKE installation
	  run: jwlawson/actions-setup-cmake@v1
	
	- name: Build creation
	  run: |
		mkdir build
		cd build
		cmake ..
		cmake --build .

	- name: test launch
	  working-directory: ${{github.workspace}}/build
	  run: ./test_multiplication
